<!DOCTYPE html><html lang="en" data-astro-cid-bvzihdzo> <head><!-- Global Metadata --><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="icon" type="image/svgxml" href="/favicon.ico"><link rel="sitemap" href="/sitemap-index.xml"><link rel="alternate" type="application/rssxml" title="Code For Real" href="https://codeforreal.com/rss.xml"><meta name="generator" content="Astro v5.9.3"><!-- Font preloads --><link rel="preload" href="/fonts/atkinson-regular.woff" as="font" type="font/woff" crossorigin><link rel="preload" href="/fonts/atkinson-bold.woff" as="font" type="font/woff" crossorigin><!-- Canonical URL --><link rel="canonical" href="https://codeforreal.com/blogs/lazy-state-and-lazy-ref-initialization-in-react/"><!-- Primary Meta Tags --><title>Lazy State and Lazy Refs initialization in React</title><meta name="title" content="Lazy State and Lazy Refs initialization in React"><meta name="description" content="Prevent heavy computational values in useState() and useRef() during re-renders using lazy initialization"><!-- Open Graph / Facebook --><!-- <meta property="og:type" content="website" />
<meta property="og:url" content={Astro.url} />
<meta property="og:title" content={title} />
<meta property="og:description" content={description} />
<meta property="og:image" content={new URL(image.src, Astro.url)} /> --><!-- Twitter --><!-- <meta property="twitter:card" content="summary_large_image" />
<meta property="twitter:url" content={Astro.url} />
<meta property="twitter:title" content={title} />
<meta property="twitter:description" content={description} />
<meta property="twitter:image" content={new URL(image.src, Astro.url)} /> --><!-- <SEO
  openGraph={{
    basic: {
      title: title,
      type: "website",
      image: openGraphImageUrl,
      url: url,
    },
    optional: {
      description: description,
    },
  }}
/> --><link rel="stylesheet" href="/_astro/_slug_.DcPfKP7U.css">
<style>main[data-astro-cid-bvzihdzo]{width:calc(100% - 2em);max-width:960px;margin:0 auto}.hero-image[data-astro-cid-bvzihdzo]{width:100%}.hero-image[data-astro-cid-bvzihdzo] img[data-astro-cid-bvzihdzo]{display:block;margin:0 auto;border-radius:12px;box-shadow:var(--box-shadow)}.prose[data-astro-cid-bvzihdzo]{width:720px;max-width:calc(100% - 2em);margin:auto;padding:1em;color:rgb(var(--gray-dark))}.title[data-astro-cid-bvzihdzo]{margin-bottom:1em;padding:1em 0;text-align:center;line-height:1}.title[data-astro-cid-bvzihdzo] h1[data-astro-cid-bvzihdzo]{margin:0 0 .5em}.date[data-astro-cid-bvzihdzo]{margin-bottom:.5em;color:rgb(var(--gray))}.last-updated-on[data-astro-cid-bvzihdzo]{font-style:italic}
</style></head> <body data-astro-cid-bvzihdzo> <header data-astro-cid-3ef6ksr2> <nav class="px-2 py-4" data-astro-cid-3ef6ksr2> <h2 data-astro-cid-3ef6ksr2> <a href="/" data-astro-cid-3ef6ksr2> <img src="/_astro/logo.B6enyIrx_ZxrowC.webp" alt="codeforreal logo" loading="eager" data-astro-cid-3ef6ksr2="true" width="1969" height="147" decoding="async" class="w-45 sm:w-65"> </a> </h2> <div class="social-links flex items-center gap-[0.8rem]" data-astro-cid-zamss57n> <a href="https://www.instagram.com/codeforreal" target="_blank" data-astro-cid-zamss57n> <span class="sr-only" data-astro-cid-zamss57n>Follow on Instagram</span> <svg viewBox="0 0 20 20" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" fill="#ffffff" stroke="#ffffff" width="20" height="20" astro-icon="social/instagram" data-astro-cid-zamss57n><g id="SVGRepo_bgCarrier" stroke-width="0" data-astro-cid-zamss57n></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round" data-astro-cid-zamss57n></g><g id="SVGRepo_iconCarrier" data-astro-cid-zamss57n> <title>instagram [#ffffff]</title> <desc data-astro-cid-zamss57n>Created with Sketch.</desc> <defs data-astro-cid-zamss57n></defs> <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" data-astro-cid-zamss57n> <g id="Dribbble-Light-Preview" transform="translate(-340.000000, -7439.000000)" fill="#ffffff" data-astro-cid-zamss57n> <g id="icons" transform="translate(56.000000, 160.000000)" data-astro-cid-zamss57n> <path d="M289.869652,7279.12273 C288.241769,7279.19618 286.830805,7279.5942 285.691486,7280.72871 C284.548187,7281.86918 284.155147,7283.28558 284.081514,7284.89653 C284.035742,7285.90201 283.768077,7293.49818 284.544207,7295.49028 C285.067597,7296.83422 286.098457,7297.86749 287.454694,7298.39256 C288.087538,7298.63872 288.809936,7298.80547 289.869652,7298.85411 C298.730467,7299.25511 302.015089,7299.03674 303.400182,7295.49028 C303.645956,7294.859 303.815113,7294.1374 303.86188,7293.08031 C304.26686,7284.19677 303.796207,7282.27117 302.251908,7280.72871 C301.027016,7279.50685 299.5862,7278.67508 289.869652,7279.12273 M289.951245,7297.06748 C288.981083,7297.0238 288.454707,7296.86201 288.103459,7296.72603 C287.219865,7296.3826 286.556174,7295.72155 286.214876,7294.84312 C285.623823,7293.32944 285.819846,7286.14023 285.872583,7284.97693 C285.924325,7283.83745 286.155174,7282.79624 286.959165,7281.99226 C287.954203,7280.99968 289.239792,7280.51332 297.993144,7280.90837 C299.135448,7280.95998 300.179243,7281.19026 300.985224,7281.99226 C301.980262,7282.98483 302.473801,7284.28014 302.071806,7292.99991 C302.028024,7293.96767 301.865833,7294.49274 301.729513,7294.84312 C300.829003,7297.15085 298.757333,7297.47145 289.951245,7297.06748 M298.089663,7283.68956 C298.089663,7284.34665 298.623998,7284.88065 299.283709,7284.88065 C299.943419,7284.88065 300.47875,7284.34665 300.47875,7283.68956 C300.47875,7283.03248 299.943419,7282.49847 299.283709,7282.49847 C298.623998,7282.49847 298.089663,7283.03248 298.089663,7283.68956 M288.862673,7288.98792 C288.862673,7291.80286 291.150266,7294.08479 293.972194,7294.08479 C296.794123,7294.08479 299.081716,7291.80286 299.081716,7288.98792 C299.081716,7286.17298 296.794123,7283.89205 293.972194,7283.89205 C291.150266,7283.89205 288.862673,7286.17298 288.862673,7288.98792 M290.655732,7288.98792 C290.655732,7287.16159 292.140329,7285.67967 293.972194,7285.67967 C295.80406,7285.67967 297.288657,7287.16159 297.288657,7288.98792 C297.288657,7290.81525 295.80406,7292.29716 293.972194,7292.29716 C292.140329,7292.29716 290.655732,7290.81525 290.655732,7288.98792" id="instagram-[#ffffff]" data-astro-cid-zamss57n></path> </g> </g> </g> </g></svg> </a> <a href="https://www.threads.com/@codeforreal" target="_blank" data-astro-cid-zamss57n> <span class="sr-only" data-astro-cid-zamss57n>Follow on Threads</span> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" width="25" height="25" astro-icon="social/threads" data-astro-cid-zamss57n> <path fill="#e0e0e0" d="M331.5 235.7c2.2 .9 4.2 1.9 6.3 2.8c29.2 14.1 50.6 35.2 61.8 61.4c15.7 36.5 17.2 95.8-30.3 143.2c-36.2 36.2-80.3 52.5-142.6 53h-.3c-70.2-.5-124.1-24.1-160.4-70.2c-32.3-41-48.9-98.1-49.5-169.6V256v-.2C17 184.3 33.6 127.2 65.9 86.2C102.2 40.1 156.2 16.5 226.4 16h.3c70.3 .5 124.9 24 162.3 69.9c18.4 22.7 32 50 40.6 81.7l-40.4 10.8c-7.1-25.8-17.8-47.8-32.2-65.4c-29.2-35.8-73-54.2-130.5-54.6c-57 .5-100.1 18.8-128.2 54.4C72.1 146.1 58.5 194.3 58 256c.5 61.7 14.1 109.9 40.3 143.3c28 35.6 71.2 53.9 128.2 54.4c51.4-.4 85.4-12.6 113.7-40.9c32.3-32.2 31.7-71.8 21.4-95.9c-6.1-14.2-17.1-26-31.9-34.9c-3.7 26.9-11.8 48.3-24.7 64.8c-17.1 21.8-41.4 33.6-72.7 35.3c-23.6 1.3-46.3-4.4-63.9-16c-20.8-13.8-33-34.8-34.3-59.3c-2.5-48.3 35.7-83 95.2-86.4c21.1-1.2 40.9-.3 59.2 2.8c-2.4-14.8-7.3-26.6-14.6-35.2c-10-11.7-25.6-17.7-46.2-17.8H227c-16.6 0-39 4.6-53.3 26.3l-34.4-23.6c19.2-29.1 50.3-45.1 87.8-45.1h.8c62.6 .4 99.9 39.5 103.7 107.7l-.2 .2zm-156 68.8c1.3 25.1 28.4 36.8 54.6 35.3c25.6-1.4 54.6-11.4 59.5-73.2c-13.2-2.9-27.8-4.4-43.4-4.4c-4.8 0-9.6 .1-14.4 .4c-42.9 2.4-57.2 23.2-56.2 41.8l-.1 .1z" data-astro-cid-zamss57n></path></svg> </a> <a href="https://github.com/codeforreal1" target="_blank" data-astro-cid-zamss57n> <span class="sr-only" data-astro-cid-zamss57n>Check out my GitHub</span> <svg viewBox="0 0 20 20" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" fill="#000000" width="20" height="20" astro-icon="social/threads" data-astro-cid-zamss57n><g id="SVGRepo_bgCarrier" stroke-width="0" data-astro-cid-zamss57n></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round" data-astro-cid-zamss57n></g><g id="SVGRepo_iconCarrier" data-astro-cid-zamss57n> <title>github [#142]</title> <desc data-astro-cid-zamss57n>Created with Sketch.</desc> <defs data-astro-cid-zamss57n></defs> <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" data-astro-cid-zamss57n> <g id="Dribbble-Light-Preview" transform="translate(-140.000000, -7559.000000)" fill="#e6e6e6" data-astro-cid-zamss57n> <g id="icons" transform="translate(56.000000, 160.000000)" data-astro-cid-zamss57n> <path d="M94,7399 C99.523,7399 104,7403.59 104,7409.253 C104,7413.782 101.138,7417.624 97.167,7418.981 C96.66,7419.082 96.48,7418.762 96.48,7418.489 C96.48,7418.151 96.492,7417.047 96.492,7415.675 C96.492,7414.719 96.172,7414.095 95.813,7413.777 C98.04,7413.523 100.38,7412.656 100.38,7408.718 C100.38,7407.598 99.992,7406.684 99.35,7405.966 C99.454,7405.707 99.797,7404.664 99.252,7403.252 C99.252,7403.252 98.414,7402.977 96.505,7404.303 C95.706,7404.076 94.85,7403.962 94,7403.958 C93.15,7403.962 92.295,7404.076 91.497,7404.303 C89.586,7402.977 88.746,7403.252 88.746,7403.252 C88.203,7404.664 88.546,7405.707 88.649,7405.966 C88.01,7406.684 87.619,7407.598 87.619,7408.718 C87.619,7412.646 89.954,7413.526 92.175,7413.785 C91.889,7414.041 91.63,7414.493 91.54,7415.156 C90.97,7415.418 89.522,7415.871 88.63,7414.304 C88.63,7414.304 88.101,7413.319 87.097,7413.247 C87.097,7413.247 86.122,7413.234 87.029,7413.87 C87.029,7413.87 87.684,7414.185 88.139,7415.37 C88.139,7415.37 88.726,7417.2 91.508,7416.58 C91.513,7417.437 91.522,7418.245 91.522,7418.489 C91.522,7418.76 91.338,7419.077 90.839,7418.982 C86.865,7417.627 84,7413.783 84,7409.253 C84,7403.59 88.478,7399 94,7399" id="github-[#142]" data-astro-cid-zamss57n></path> </g> </g> </g> </g></svg> </a> </div>  </nav> </header>  <main data-astro-cid-bvzihdzo> <div data-astro-cid-bvzihdzo> <a href="/blogs" class="mb-2 flex items-center" data-astro-cid-bvzihdzo> <svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="w-4 h-4" data-astro-cid-bvzihdzo><g id="SVGRepo_bgCarrier" stroke-width="0" data-astro-cid-bvzihdzo></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round" data-astro-cid-bvzihdzo></g><g id="SVGRepo_iconCarrier" data-astro-cid-bvzihdzo><path fill="currentColor" d="M224 480h640a32 32 0 1 1 0 64H224a32 32 0 0 1 0-64z" data-astro-cid-bvzihdzo></path><path fill="currentColor" d="m237.248 512 265.408 265.344a32 32 0 0 1-45.312 45.312l-288-288a32 32 0 0 1 0-45.312l288-288a32 32 0 1 1 45.312 45.312L237.248 512z" data-astro-cid-bvzihdzo></path></g></svg> <span class="mt-1 ml-2 block text-sm/6" data-astro-cid-bvzihdzo>All Blogs </span> </a> </div> <article data-astro-cid-bvzihdzo> <div class="hero-image" data-astro-cid-bvzihdzo> <img src="/_astro/lazy-state-and-lazy-ref-initialization-in-react.Bfm3ZyeN_102dWm.webp" alt data-astro-cid-bvzihdzo="true" width="1020" height="510" loading="lazy" decoding="async"> </div> <div class="prose" data-astro-cid-bvzihdzo> <div class="title" data-astro-cid-bvzihdzo> <div class="date" data-astro-cid-bvzihdzo> <time datetime="2021-12-31T18:15:00.000Z" class="m-0!"> Jan 1, 2022 </time>  </div> <h1 data-astro-cid-bvzihdzo>Lazy State and Lazy Refs initialization in React</h1> <hr data-astro-cid-bvzihdzo> </div> <div class="opacity-90" data-astro-cid-bvzihdzo>  <p>Today we are going to learn about lazy state and lazy refs initialization in React. These are not actually features per se in React but optimization techniques that we might need to do when we are trying to initialize some value in state or ref that might be heavy in computation. Lets get right into it.</p>
<p>Lets say we have this simple <code>App.js</code> component,</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="plaintext"><code><span class="line"><span>import React from &#39;react&#39;</span></span>
<span class="line"><span>import &#39;./App.css&#39;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>function App() {</span></span>
<span class="line"><span>  const [pressCount, setPressCount] = React.useState(0)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>  const handleButtonClick = () =&gt; {</span></span>
<span class="line"><span>    setPressCount((previousCount) =&gt; previousCount + 1)</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>  return (</span></span>
<span class="line"><span>    &lt;div&gt;</span></span>
<span class="line"><span>      &lt;p&gt;My Press Count is {pressCount} &lt;/p&gt;</span></span>
<span class="line"><span>      &lt;button onClick={handleButtonClick}&gt;Click Me&lt;/button&gt;</span></span>
<span class="line"><span>    &lt;/div&gt;</span></span>
<span class="line"><span>  )</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span></span></span>
<span class="line"><span>export default App</span></span>
<span class="line"><span></span></span></code></pre>
<p>Clicking the button will increase the press count.
Now lets say we want to be able to save this press count in a localStoareg Web API and sync the count every time a user refreshes or comes back to the site. This means we need to be able to save the count after user has done their presses and we need to be able to get the count from localStorage API when the user comes back again to the site.
So we need to modify our useState like below:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="plaintext"><code><span class="line"><span>import React from &#39;react&#39;</span></span>
<span class="line"><span>import &#39;./App.css&#39;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>const ITEM_KEY = &#39;press&#39;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>function App() {</span></span>
<span class="line"><span>  const [pressCount, setPressCount] = React.useState(</span></span>
<span class="line"><span>    +window.localStorage.getItem(ITEM_KEY)</span></span>
<span class="line"><span>  )</span></span>
<span class="line"><span></span></span>
<span class="line"><span>  function handleButtonClick() {</span></span>
<span class="line"><span>    setPressCount((previousCount) =&gt; previousCount + 1)</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>  const handleSavePress = React.useCallback(() =&gt; {</span></span>
<span class="line"><span>    localStorage.setItem(ITEM_KEY, pressCount)</span></span>
<span class="line"><span>  }, [pressCount])</span></span>
<span class="line"><span></span></span>
<span class="line"><span>  return (</span></span>
<span class="line"><span>    &lt;div&gt;</span></span>
<span class="line"><span>      &lt;p&gt;My Press Count is {pressCount} &lt;/p&gt;</span></span>
<span class="line"><span>      &lt;button onClick={handleButtonClick}&gt;Click Me&lt;/button&gt;</span></span>
<span class="line"><span>      &lt;button onClick={handleSavePress} style={{ marginLeft: &#39;1rem&#39; }}&gt;</span></span>
<span class="line"><span>        Save Press</span></span>
<span class="line"><span>      &lt;/button&gt;</span></span>
<span class="line"><span>    &lt;/div&gt;</span></span>
<span class="line"><span>  )</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span></span></span>
<span class="line"><span>export default App</span></span></code></pre>
<p>Here we have added one more button to save the count progress to localStorage API. But focus on the useState initialization part. We are now passing <code>+window.localStorage.getItem(ITEM_KEY)</code> as a initial state. At first localStorage won’t have any value mapping to key name ‘press’ so it will be null and in JavaScript +null = 0 (Neat JS trick there yeh 😉). That means initial value will be 0 here. And everytime the user increases the press count they can save and the handleSavePress function will save the count. That means we have complete synchronization of the count.</p>
<p>But the above approach has one slight problem. Every time we change the press count, our component will re-render, that means our useState() need to also re-initialize. Yes, although we don’t need the initial value, useState() will still re-initialize this. That means <code>window.localStorage.getItem(ITEM_KEY)</code> will keep on running even though we don’t need it at any point after pressing “Click Me” button.</p>
<p>This is where lazy initialization come into play. To prevent the useState() initilizatio  every time the component re-renders, we need to pass the state value as a function.</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="plaintext"><code><span class="line"><span>import React from &#39;react&#39;</span></span>
<span class="line"><span>import &#39;./App.css&#39;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>const ITEM_KEY = &#39;press&#39;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>function syncValueFromLocalStorage() {</span></span>
<span class="line"><span>  const value = localStorage.getItem(ITEM_KEY)</span></span>
<span class="line"><span>  if (value?.length &gt; 0 &amp;&amp; !isNaN(value)) {</span></span>
<span class="line"><span>    return +value</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>  localStorage.setItem(ITEM_KEY, 0)</span></span>
<span class="line"><span>  return 0</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span></span></span>
<span class="line"><span>function App() {</span></span>
<span class="line"><span>  const [pressCount, setPressCount] = React.useState(syncValueFromLocalStorage)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>  function handleButtonClick() {</span></span>
<span class="line"><span>    setPressCount((previousCount) =&gt; previousCount + 1)</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>  const handleSavePress = React.useCallback(() =&gt; {</span></span>
<span class="line"><span>    localStorage.setItem(ITEM_KEY, pressCount)</span></span>
<span class="line"><span>  }, [pressCount])</span></span>
<span class="line"><span></span></span>
<span class="line"><span>  return (</span></span>
<span class="line"><span>    &lt;div&gt;</span></span>
<span class="line"><span>      &lt;p&gt;My Press Count is {pressCount} &lt;/p&gt;</span></span>
<span class="line"><span>      &lt;button onClick={handleButtonClick}&gt;Click Me&lt;/button&gt;</span></span>
<span class="line"><span>      &lt;button onClick={handleSavePress} style={{ marginLeft: &#39;1rem&#39; }}&gt;</span></span>
<span class="line"><span>        Save Press</span></span>
<span class="line"><span>      &lt;/button&gt;</span></span>
<span class="line"><span>    &lt;/div&gt;</span></span>
<span class="line"><span>  )</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span></span></span>
<span class="line"><span>export default App</span></span></code></pre>
<p>Now our useState() will only use the initial value from localStoarege once and kind of prevents heavy computation. (The localStorage Web API might be not that heavy but still using it unnecessarily multiple times can make the app slow).</p>
<p>But how do we know this function wont be called on every re-renders? Just add one console.log inside the syncValueFromLocalStorage function and see for yourself.</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="plaintext"><code><span class="line"><span>function syncValueFromLocalStorage() {</span></span>
<span class="line"><span>  console.log(&#39;CALLED ME&#39;)</span></span>
<span class="line"><span>  const value = localStorage.getItem(ITEM_KEY)</span></span>
<span class="line"><span>  if (value?.length &gt; 0 &amp;&amp; !isNaN(value)) {</span></span>
<span class="line"><span>    return +value</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>  localStorage.setItem(ITEM_KEY, 0)</span></span>
<span class="line"><span>  return 0</span></span>
<span class="line"><span>}</span></span></code></pre>
<p><img src="https://cdn.hashnode.com/res/hashnode/image/upload/v1641052284854/l9sYTQGEP.gif" alt="ezgif.com-gif-maker.gif"/></p>
<p>As you can see above, “CALLED ME” was called only once when it was initialized at the beginning or when page was refreshed but was prevented on every re-render, when we press the ‘Click Me’ button. This is what we wanted.</p>
<p>Keep in mind that we want to just give the reference to function in useState() like <code>React.useState(syncValueFromLocalStorage)</code> not invoke it there like <code>React.useState(syncValueFromLocalStorage())</code>. Invoking will result in the same behavior that we discussed in the first place. It will be called on every re-render like below. This one is very important for lazy initialization.</p>
<p><img src="https://cdn.hashnode.com/res/hashnode/image/upload/v1641052622217/qvvRGvrAt.gif" alt="ezgif.com-gif-maker (1).gif"/></p>
<p>This was all about lazy initialization in useState(). The one with the useRef() is a little bit different. The idea is same but if we give function as a value to useRef() it will treat as a reference to function. That means we have to call .current() to get the value which I think is not neat. So for useRef just do conditional check if it has value or not in the first place. And if it does not we assign the value. That way we called the function only once and useRef() grabbed the value.</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="plaintext"><code><span class="line"><span> const value = React.useRef(null)</span></span>
<span class="line"><span>  if (value.current == null) {</span></span>
<span class="line"><span>    value.current = syncValueFromLocalStorage()</span></span>
<span class="line"><span>  }</span></span></code></pre>
<p>That’s it folks. This short article was all about lazy initialization in React. If you want your feed to be filled with such content on JavaScript, TypeScript, NodeJS, React, GraphQL, MySQL etc make sure to follow the blog. I will be posting a lot of content surrounding Full-Stack Development in the future.</p>  </div> </div> </article> </main> <footer data-astro-cid-sz7xmlte>
&copy; 2025 Code For Real. All rights reserved.
<div data-astro-cid-sz7xmlte> <a href="mailto:codeforreal@outlook.com" target="_blank" data-astro-cid-sz7xmlte>codeforreal@outlook.com</a> </div> <div class="flex justify-center" data-astro-cid-sz7xmlte> <div class="social-links flex items-center gap-[0.8rem]" data-astro-cid-zamss57n> <a href="https://www.instagram.com/codeforreal" target="_blank" data-astro-cid-zamss57n> <span class="sr-only" data-astro-cid-zamss57n>Follow on Instagram</span> <svg viewBox="0 0 20 20" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" fill="#ffffff" stroke="#ffffff" width="20" height="20" astro-icon="social/instagram" data-astro-cid-zamss57n><g id="SVGRepo_bgCarrier" stroke-width="0" data-astro-cid-zamss57n></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round" data-astro-cid-zamss57n></g><g id="SVGRepo_iconCarrier" data-astro-cid-zamss57n> <title>instagram [#ffffff]</title> <desc data-astro-cid-zamss57n>Created with Sketch.</desc> <defs data-astro-cid-zamss57n></defs> <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" data-astro-cid-zamss57n> <g id="Dribbble-Light-Preview" transform="translate(-340.000000, -7439.000000)" fill="#ffffff" data-astro-cid-zamss57n> <g id="icons" transform="translate(56.000000, 160.000000)" data-astro-cid-zamss57n> <path d="M289.869652,7279.12273 C288.241769,7279.19618 286.830805,7279.5942 285.691486,7280.72871 C284.548187,7281.86918 284.155147,7283.28558 284.081514,7284.89653 C284.035742,7285.90201 283.768077,7293.49818 284.544207,7295.49028 C285.067597,7296.83422 286.098457,7297.86749 287.454694,7298.39256 C288.087538,7298.63872 288.809936,7298.80547 289.869652,7298.85411 C298.730467,7299.25511 302.015089,7299.03674 303.400182,7295.49028 C303.645956,7294.859 303.815113,7294.1374 303.86188,7293.08031 C304.26686,7284.19677 303.796207,7282.27117 302.251908,7280.72871 C301.027016,7279.50685 299.5862,7278.67508 289.869652,7279.12273 M289.951245,7297.06748 C288.981083,7297.0238 288.454707,7296.86201 288.103459,7296.72603 C287.219865,7296.3826 286.556174,7295.72155 286.214876,7294.84312 C285.623823,7293.32944 285.819846,7286.14023 285.872583,7284.97693 C285.924325,7283.83745 286.155174,7282.79624 286.959165,7281.99226 C287.954203,7280.99968 289.239792,7280.51332 297.993144,7280.90837 C299.135448,7280.95998 300.179243,7281.19026 300.985224,7281.99226 C301.980262,7282.98483 302.473801,7284.28014 302.071806,7292.99991 C302.028024,7293.96767 301.865833,7294.49274 301.729513,7294.84312 C300.829003,7297.15085 298.757333,7297.47145 289.951245,7297.06748 M298.089663,7283.68956 C298.089663,7284.34665 298.623998,7284.88065 299.283709,7284.88065 C299.943419,7284.88065 300.47875,7284.34665 300.47875,7283.68956 C300.47875,7283.03248 299.943419,7282.49847 299.283709,7282.49847 C298.623998,7282.49847 298.089663,7283.03248 298.089663,7283.68956 M288.862673,7288.98792 C288.862673,7291.80286 291.150266,7294.08479 293.972194,7294.08479 C296.794123,7294.08479 299.081716,7291.80286 299.081716,7288.98792 C299.081716,7286.17298 296.794123,7283.89205 293.972194,7283.89205 C291.150266,7283.89205 288.862673,7286.17298 288.862673,7288.98792 M290.655732,7288.98792 C290.655732,7287.16159 292.140329,7285.67967 293.972194,7285.67967 C295.80406,7285.67967 297.288657,7287.16159 297.288657,7288.98792 C297.288657,7290.81525 295.80406,7292.29716 293.972194,7292.29716 C292.140329,7292.29716 290.655732,7290.81525 290.655732,7288.98792" id="instagram-[#ffffff]" data-astro-cid-zamss57n></path> </g> </g> </g> </g></svg> </a> <a href="https://www.threads.com/@codeforreal" target="_blank" data-astro-cid-zamss57n> <span class="sr-only" data-astro-cid-zamss57n>Follow on Threads</span> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" width="25" height="25" astro-icon="social/threads" data-astro-cid-zamss57n> <path fill="#e0e0e0" d="M331.5 235.7c2.2 .9 4.2 1.9 6.3 2.8c29.2 14.1 50.6 35.2 61.8 61.4c15.7 36.5 17.2 95.8-30.3 143.2c-36.2 36.2-80.3 52.5-142.6 53h-.3c-70.2-.5-124.1-24.1-160.4-70.2c-32.3-41-48.9-98.1-49.5-169.6V256v-.2C17 184.3 33.6 127.2 65.9 86.2C102.2 40.1 156.2 16.5 226.4 16h.3c70.3 .5 124.9 24 162.3 69.9c18.4 22.7 32 50 40.6 81.7l-40.4 10.8c-7.1-25.8-17.8-47.8-32.2-65.4c-29.2-35.8-73-54.2-130.5-54.6c-57 .5-100.1 18.8-128.2 54.4C72.1 146.1 58.5 194.3 58 256c.5 61.7 14.1 109.9 40.3 143.3c28 35.6 71.2 53.9 128.2 54.4c51.4-.4 85.4-12.6 113.7-40.9c32.3-32.2 31.7-71.8 21.4-95.9c-6.1-14.2-17.1-26-31.9-34.9c-3.7 26.9-11.8 48.3-24.7 64.8c-17.1 21.8-41.4 33.6-72.7 35.3c-23.6 1.3-46.3-4.4-63.9-16c-20.8-13.8-33-34.8-34.3-59.3c-2.5-48.3 35.7-83 95.2-86.4c21.1-1.2 40.9-.3 59.2 2.8c-2.4-14.8-7.3-26.6-14.6-35.2c-10-11.7-25.6-17.7-46.2-17.8H227c-16.6 0-39 4.6-53.3 26.3l-34.4-23.6c19.2-29.1 50.3-45.1 87.8-45.1h.8c62.6 .4 99.9 39.5 103.7 107.7l-.2 .2zm-156 68.8c1.3 25.1 28.4 36.8 54.6 35.3c25.6-1.4 54.6-11.4 59.5-73.2c-13.2-2.9-27.8-4.4-43.4-4.4c-4.8 0-9.6 .1-14.4 .4c-42.9 2.4-57.2 23.2-56.2 41.8l-.1 .1z" data-astro-cid-zamss57n></path></svg> </a> <a href="https://github.com/codeforreal1" target="_blank" data-astro-cid-zamss57n> <span class="sr-only" data-astro-cid-zamss57n>Check out my GitHub</span> <svg viewBox="0 0 20 20" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" fill="#000000" width="20" height="20" astro-icon="social/threads" data-astro-cid-zamss57n><g id="SVGRepo_bgCarrier" stroke-width="0" data-astro-cid-zamss57n></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round" data-astro-cid-zamss57n></g><g id="SVGRepo_iconCarrier" data-astro-cid-zamss57n> <title>github [#142]</title> <desc data-astro-cid-zamss57n>Created with Sketch.</desc> <defs data-astro-cid-zamss57n></defs> <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" data-astro-cid-zamss57n> <g id="Dribbble-Light-Preview" transform="translate(-140.000000, -7559.000000)" fill="#e6e6e6" data-astro-cid-zamss57n> <g id="icons" transform="translate(56.000000, 160.000000)" data-astro-cid-zamss57n> <path d="M94,7399 C99.523,7399 104,7403.59 104,7409.253 C104,7413.782 101.138,7417.624 97.167,7418.981 C96.66,7419.082 96.48,7418.762 96.48,7418.489 C96.48,7418.151 96.492,7417.047 96.492,7415.675 C96.492,7414.719 96.172,7414.095 95.813,7413.777 C98.04,7413.523 100.38,7412.656 100.38,7408.718 C100.38,7407.598 99.992,7406.684 99.35,7405.966 C99.454,7405.707 99.797,7404.664 99.252,7403.252 C99.252,7403.252 98.414,7402.977 96.505,7404.303 C95.706,7404.076 94.85,7403.962 94,7403.958 C93.15,7403.962 92.295,7404.076 91.497,7404.303 C89.586,7402.977 88.746,7403.252 88.746,7403.252 C88.203,7404.664 88.546,7405.707 88.649,7405.966 C88.01,7406.684 87.619,7407.598 87.619,7408.718 C87.619,7412.646 89.954,7413.526 92.175,7413.785 C91.889,7414.041 91.63,7414.493 91.54,7415.156 C90.97,7415.418 89.522,7415.871 88.63,7414.304 C88.63,7414.304 88.101,7413.319 87.097,7413.247 C87.097,7413.247 86.122,7413.234 87.029,7413.87 C87.029,7413.87 87.684,7414.185 88.139,7415.37 C88.139,7415.37 88.726,7417.2 91.508,7416.58 C91.513,7417.437 91.522,7418.245 91.522,7418.489 C91.522,7418.76 91.338,7419.077 90.839,7418.982 C86.865,7417.627 84,7413.783 84,7409.253 C84,7403.59 88.478,7399 94,7399" id="github-[#142]" data-astro-cid-zamss57n></path> </g> </g> </g> </g></svg> </a> </div>  </div> </footer>  </body></html>